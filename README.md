# üöÄ My Market App ‚Äî –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏—Ç—Ä–∏–Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–í–∏—Ç—Ä–∏–Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞¬ª, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ **Spring Boot 3** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (Project Reactor)**.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–º –≤–≤–æ–¥–µ-–≤—ã–≤–æ–¥–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.

---

## üìå –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **Reactive UI**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤–∏—Ç—Ä–∏–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ Thymeleaf.
*   **–ü–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –ì–∏–±–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
*   **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (R2DBC).
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π**: –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã –≤ `WebSession`.
*   **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤**: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `TransactionalOperator`.
*   **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º**: –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤ (JDBC/JPA).

---

## üß± –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
*   **Java 21**
*   **Spring Boot 3.4**
*   **Spring WebFlux** (–≤–º–µ—Å—Ç–æ Spring MVC)
*   **Spring Data R2DBC** (–≤–º–µ—Å—Ç–æ JPA/Hibernate)
*   **Project Reactor** (Mono, Flux)
*   **Thymeleaf** (—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è WebFlux)
*   **Netty** (Embedded Server)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
*   **H2 (R2DBC)** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
*   **JUnit 5**
*   **StepVerifier** ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤.
*   **WebTestClient** ‚Äî –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.
*   **Mockito** ‚Äî –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.

---


### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Docker
- Executable JAR

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
my-market-app
‚îú‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îú‚îÄ‚îÄ main
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ com.iron.mymarket
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controller   # WebFlux –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ service      # –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Mono/Flux)
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dao          # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ entities # –°—É—â–Ω–æ—Å—Ç–∏ R2DBC
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ repository # –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (R2dbcRepository)
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dto          # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ mapper       # MapStruct –∏–ª–∏ —Ä—É—á–Ω—ã–µ –º–∞–ø–ø–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ configuration # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Session, TransactionalOperator –∏ –¥—Ä.
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resources
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ application.properties
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ schema.sql       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ data.sql         # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ static/img       # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ templates        # –®–∞–±–ª–æ–Ω—ã (items, cart, orders...)
‚îÇ   ‚îî‚îÄ‚îÄ test
‚îÇ       ‚îî‚îÄ‚îÄ java
‚îÇ            ‚îî‚îÄ‚îÄ com.iron.mymarket
‚îÇ                           ‚îú‚îÄ‚îÄ controller      # –¢–µ—Å—Ç—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
‚îÇ                           ‚îú‚îÄ‚îÄ repository      # –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
‚îÇ                           ‚îî‚îÄ‚îÄ service         # –¢–µ—Å—Ç—ã –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤

```
---

## üñ• HTML-—à–∞–±–ª–æ–Ω—ã (Thymeleaf)

| –®–∞–±–ª–æ–Ω        | URL               | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ        |
|--------------|-------------------|-------------------|
| `items.html` | `/`, `/items`     | –í–∏—Ç—Ä–∏–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤   |
| `item.html`  | `/items/{id}`     | –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞   |
| `cart.html`  | `/cart/items`     | –ö–æ—Ä–∑–∏–Ω–∞           |
| `orders.html`| `/orders`         | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤    |
| `order.html` | `/orders/{id}`    | –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞     |

---

## üåê Web API

### üîπ –í–∏—Ç—Ä–∏–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

GET /
GET /items


**Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `sort` ‚Äî `NO | ALPHA | PRICE`
- `pageNumber` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `1`)
- `pageSize` ‚Äî —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `5`)

**–ú–æ–¥–µ–ª—å:**
- `items` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ (–ø–æ 3 –≤ —Å—Ç—Ä–æ–∫–µ)
- `search`
- `sort`
- `paging`

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ (—Å –≤–∏—Ç—Ä–∏–Ω—ã)


POST /items


**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- `action` ‚Äî `PLUS | MINUS`
- –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

redirect:/items?...

---

### üîπ –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞


GET /items/{id}


**–ú–æ–¥–µ–ª—å:**
- `item`

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞


POST /items/{id}?action=PLUS|MINUS


---

### üîπ –ö–æ—Ä–∑–∏–Ω–∞

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã


GET /cart/items


**–ú–æ–¥–µ–ª—å:**
- `items`
- `total`

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã


POST /cart/items?id={id}&action=PLUS|MINUS|DELETE

---

### üîπ –ó–∞–∫–∞–∑—ã

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤


GET /orders


**–ú–æ–¥–µ–ª—å:**
- `orders`

---

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞


GET /orders/{id}?newOrder=true|false


**–ú–æ–¥–µ–ª—å:**
- `order`
- `newOrder`

---

#### –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞


POST /buy
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
redirect:/orders/{id}?newOrder=true


---

## üñº –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤:

src/main/resources/static/img/products


- –í —Å—É—â–Ω–æ—Å—Ç–∏ `Item` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ:
```java
String imgPath; 

// –ø—Ä–∏–º–µ—Ä: img/products/laptop_pro_15.jpg

```

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Thymeleaf:

<img th:src="@{/${item.imgPath}}" alt="Product image">


## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

*   **–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `StepVerifier` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ø–æ—á–µ–∫ `Mono` –∏ `Flux`, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
*   **–¢–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `WebTestClient` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–≤, HTML-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
*   **–¢–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤**: `@DataR2dbcTest` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

mvn test

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–õ–æ–∫–∞–ª—å–Ω–æ
mvn clean package
java -jar target/my-market-app.jar


### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:

http://localhost:8080

## üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker
docker build -t my-market-app .
docker run -p 8080:8080 my-market-app